76ef69139d219302dfedea8d1c28d250
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _ListMetricsAggregator = _interopRequireDefault(require("./ListMetricsAggregator"));
var Info = (0, _createClass2.default)(function Info() {
  (0, _classCallCheck2.default)(this, Info);
  this.any_blank_count = 0;
  this.any_blank_ms = 0;
  this.any_blank_speed_sum = 0;
  this.mostly_blank_count = 0;
  this.mostly_blank_ms = 0;
  this.pixels_blank = 0;
  this.pixels_sampled = 0;
  this.pixels_scrolled = 0;
  this.total_time_spent = 0;
  this.sample_count = 0;
});
var DEBUG = false;
var _listeners = [];
var _minSampleCount = 10;
var _sampleRate = DEBUG ? 1 : null;
var FillRateHelper = function () {
  function FillRateHelper(listMetrics) {
    (0, _classCallCheck2.default)(this, FillRateHelper);
    this._anyBlankStartTime = null;
    this._enabled = false;
    this._info = new Info();
    this._mostlyBlankStartTime = null;
    this._samplesStartTime = null;
    this._listMetrics = listMetrics;
    this._enabled = (_sampleRate || 0) > Math.random();
    this._resetData();
  }
  return (0, _createClass2.default)(FillRateHelper, [{
    key: "activate",
    value: function activate() {
      if (this._enabled && this._samplesStartTime == null) {
        DEBUG && console.debug('FillRateHelper: activate');
        this._samplesStartTime = global.performance.now();
      }
    }
  }, {
    key: "deactivateAndFlush",
    value: function deactivateAndFlush() {
      if (!this._enabled) {
        return;
      }
      var start = this._samplesStartTime;
      if (start == null) {
        DEBUG && console.debug('FillRateHelper: bail on deactivate with no start time');
        return;
      }
      if (this._info.sample_count < _minSampleCount) {
        this._resetData();
        return;
      }
      var total_time_spent = global.performance.now() - start;
      var info = Object.assign({}, this._info, {
        total_time_spent: total_time_spent
      });
      if (DEBUG) {
        var derived = {
          avg_blankness: this._info.pixels_blank / this._info.pixels_sampled,
          avg_speed: this._info.pixels_scrolled / (total_time_spent / 1000),
          avg_speed_when_any_blank: this._info.any_blank_speed_sum / this._info.any_blank_count,
          any_blank_per_min: this._info.any_blank_count / (total_time_spent / 1000 / 60),
          any_blank_time_frac: this._info.any_blank_ms / total_time_spent,
          mostly_blank_per_min: this._info.mostly_blank_count / (total_time_spent / 1000 / 60),
          mostly_blank_time_frac: this._info.mostly_blank_ms / total_time_spent
        };
        for (var key in derived) {
          derived[key] = Math.round(1000 * derived[key]) / 1000;
        }
        console.debug('FillRateHelper deactivateAndFlush: ', {
          derived: derived,
          info: info
        });
      }
      _listeners.forEach(function (listener) {
        return listener(info);
      });
      this._resetData();
    }
  }, {
    key: "computeBlankness",
    value: function computeBlankness(props, cellsAroundViewport, scrollMetrics) {
      if (!this._enabled || props.getItemCount(props.data) === 0 || cellsAroundViewport.last < cellsAroundViewport.first || this._samplesStartTime == null) {
        return 0;
      }
      var dOffset = scrollMetrics.dOffset,
        offset = scrollMetrics.offset,
        velocity = scrollMetrics.velocity,
        visibleLength = scrollMetrics.visibleLength;
      this._info.sample_count++;
      this._info.pixels_sampled += Math.round(visibleLength);
      this._info.pixels_scrolled += Math.round(Math.abs(dOffset));
      var scrollSpeed = Math.round(Math.abs(velocity) * 1000);
      var now = global.performance.now();
      if (this._anyBlankStartTime != null) {
        this._info.any_blank_ms += now - this._anyBlankStartTime;
      }
      this._anyBlankStartTime = null;
      if (this._mostlyBlankStartTime != null) {
        this._info.mostly_blank_ms += now - this._mostlyBlankStartTime;
      }
      this._mostlyBlankStartTime = null;
      var blankTop = 0;
      var first = cellsAroundViewport.first;
      var firstFrame = this._listMetrics.getCellMetrics(first, props);
      while (first <= cellsAroundViewport.last && (!firstFrame || !firstFrame.isMounted)) {
        firstFrame = this._listMetrics.getCellMetrics(first, props);
        first++;
      }
      if (firstFrame && first > 0) {
        blankTop = Math.min(visibleLength, Math.max(0, firstFrame.offset - offset));
      }
      var blankBottom = 0;
      var last = cellsAroundViewport.last;
      var lastFrame = this._listMetrics.getCellMetrics(last, props);
      while (last >= cellsAroundViewport.first && (!lastFrame || !lastFrame.isMounted)) {
        lastFrame = this._listMetrics.getCellMetrics(last, props);
        last--;
      }
      if (lastFrame && last < props.getItemCount(props.data) - 1) {
        var bottomEdge = lastFrame.offset + lastFrame.length;
        blankBottom = Math.min(visibleLength, Math.max(0, offset + visibleLength - bottomEdge));
      }
      var pixels_blank = Math.round(blankTop + blankBottom);
      var blankness = pixels_blank / visibleLength;
      if (blankness > 0) {
        this._anyBlankStartTime = now;
        this._info.any_blank_speed_sum += scrollSpeed;
        this._info.any_blank_count++;
        this._info.pixels_blank += pixels_blank;
        if (blankness > 0.5) {
          this._mostlyBlankStartTime = now;
          this._info.mostly_blank_count++;
        }
      } else if (scrollSpeed < 0.01 || Math.abs(dOffset) < 1) {
        this.deactivateAndFlush();
      }
      return blankness;
    }
  }, {
    key: "enabled",
    value: function enabled() {
      return this._enabled;
    }
  }, {
    key: "_resetData",
    value: function _resetData() {
      this._anyBlankStartTime = null;
      this._info = new Info();
      this._mostlyBlankStartTime = null;
      this._samplesStartTime = null;
    }
  }], [{
    key: "addListener",
    value: function addListener(callback) {
      if (_sampleRate === null) {
        console.warn('Call `FillRateHelper.setSampleRate` before `addListener`.');
      }
      _listeners.push(callback);
      return {
        remove: function remove() {
          _listeners = _listeners.filter(function (listener) {
            return callback !== listener;
          });
        }
      };
    }
  }, {
    key: "setSampleRate",
    value: function setSampleRate(sampleRate) {
      _sampleRate = sampleRate;
    }
  }, {
    key: "setMinSampleCount",
    value: function setMinSampleCount(minSampleCount) {
      _minSampleCount = minSampleCount;
    }
  }]);
}();
module.exports = FillRateHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jcmVhdGVDbGFzczIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX0xpc3RNZXRyaWNzQWdncmVnYXRvciIsIkluZm8iLCJkZWZhdWx0IiwiYW55X2JsYW5rX2NvdW50IiwiYW55X2JsYW5rX21zIiwiYW55X2JsYW5rX3NwZWVkX3N1bSIsIm1vc3RseV9ibGFua19jb3VudCIsIm1vc3RseV9ibGFua19tcyIsInBpeGVsc19ibGFuayIsInBpeGVsc19zYW1wbGVkIiwicGl4ZWxzX3Njcm9sbGVkIiwidG90YWxfdGltZV9zcGVudCIsInNhbXBsZV9jb3VudCIsIkRFQlVHIiwiX2xpc3RlbmVycyIsIl9taW5TYW1wbGVDb3VudCIsIl9zYW1wbGVSYXRlIiwiRmlsbFJhdGVIZWxwZXIiLCJsaXN0TWV0cmljcyIsIl9hbnlCbGFua1N0YXJ0VGltZSIsIl9lbmFibGVkIiwiX2luZm8iLCJfbW9zdGx5QmxhbmtTdGFydFRpbWUiLCJfc2FtcGxlc1N0YXJ0VGltZSIsIl9saXN0TWV0cmljcyIsIk1hdGgiLCJyYW5kb20iLCJfcmVzZXREYXRhIiwia2V5IiwidmFsdWUiLCJhY3RpdmF0ZSIsImNvbnNvbGUiLCJkZWJ1ZyIsImdsb2JhbCIsInBlcmZvcm1hbmNlIiwibm93IiwiZGVhY3RpdmF0ZUFuZEZsdXNoIiwic3RhcnQiLCJpbmZvIiwiT2JqZWN0IiwiYXNzaWduIiwiZGVyaXZlZCIsImF2Z19ibGFua25lc3MiLCJhdmdfc3BlZWQiLCJhdmdfc3BlZWRfd2hlbl9hbnlfYmxhbmsiLCJhbnlfYmxhbmtfcGVyX21pbiIsImFueV9ibGFua190aW1lX2ZyYWMiLCJtb3N0bHlfYmxhbmtfcGVyX21pbiIsIm1vc3RseV9ibGFua190aW1lX2ZyYWMiLCJyb3VuZCIsImZvckVhY2giLCJsaXN0ZW5lciIsImNvbXB1dGVCbGFua25lc3MiLCJwcm9wcyIsImNlbGxzQXJvdW5kVmlld3BvcnQiLCJzY3JvbGxNZXRyaWNzIiwiZ2V0SXRlbUNvdW50IiwiZGF0YSIsImxhc3QiLCJmaXJzdCIsImRPZmZzZXQiLCJvZmZzZXQiLCJ2ZWxvY2l0eSIsInZpc2libGVMZW5ndGgiLCJhYnMiLCJzY3JvbGxTcGVlZCIsImJsYW5rVG9wIiwiZmlyc3RGcmFtZSIsImdldENlbGxNZXRyaWNzIiwiaXNNb3VudGVkIiwibWluIiwibWF4IiwiYmxhbmtCb3R0b20iLCJsYXN0RnJhbWUiLCJib3R0b21FZGdlIiwibGVuZ3RoIiwiYmxhbmtuZXNzIiwiZW5hYmxlZCIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJ3YXJuIiwicHVzaCIsInJlbW92ZSIsImZpbHRlciIsInNldFNhbXBsZVJhdGUiLCJzYW1wbGVSYXRlIiwic2V0TWluU2FtcGxlQ291bnQiLCJtaW5TYW1wbGVDb3VudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJGaWxsUmF0ZUhlbHBlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtDZWxsTWV0cmljUHJvcHN9IGZyb20gJy4vTGlzdE1ldHJpY3NBZ2dyZWdhdG9yJztcbmltcG9ydCBMaXN0TWV0cmljc0FnZ3JlZ2F0b3IgZnJvbSAnLi9MaXN0TWV0cmljc0FnZ3JlZ2F0b3InO1xuXG5leHBvcnQgdHlwZSBGaWxsUmF0ZUluZm8gPSBJbmZvO1xuXG5jbGFzcyBJbmZvIHtcbiAgYW55X2JsYW5rX2NvdW50OiBudW1iZXIgPSAwO1xuICBhbnlfYmxhbmtfbXM6IG51bWJlciA9IDA7XG4gIGFueV9ibGFua19zcGVlZF9zdW06IG51bWJlciA9IDA7XG4gIG1vc3RseV9ibGFua19jb3VudDogbnVtYmVyID0gMDtcbiAgbW9zdGx5X2JsYW5rX21zOiBudW1iZXIgPSAwO1xuICBwaXhlbHNfYmxhbms6IG51bWJlciA9IDA7XG4gIHBpeGVsc19zYW1wbGVkOiBudW1iZXIgPSAwO1xuICBwaXhlbHNfc2Nyb2xsZWQ6IG51bWJlciA9IDA7XG4gIHRvdGFsX3RpbWVfc3BlbnQ6IG51bWJlciA9IDA7XG4gIHNhbXBsZV9jb3VudDogbnVtYmVyID0gMDtcbn1cblxuY29uc3QgREVCVUcgPSBmYWxzZTtcblxubGV0IF9saXN0ZW5lcnM6IEFycmF5PChJbmZvKSA9PiB2b2lkPiA9IFtdO1xubGV0IF9taW5TYW1wbGVDb3VudCA9IDEwO1xubGV0IF9zYW1wbGVSYXRlID0gREVCVUcgPyAxIDogbnVsbDtcblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyBmb3IgZGV0ZWN0aW5nIHdoZW4gdGhlIG1heGltZW0gZmlsbCByYXRlIG9mIGBWaXJ0dWFsaXplZExpc3RgIGlzIGV4Y2VlZGVkLlxuICogQnkgZGVmYXVsdCB0aGUgc2FtcGxpbmcgcmF0ZSBpcyBzZXQgdG8gemVybyBhbmQgdGhpcyB3aWxsIGRvIG5vdGhpbmcuIElmIHlvdSB3YW50IHRvIGNvbGxlY3RcbiAqIHNhbXBsZXMgKGUuZy4gdG8gbG9nIHRoZW0pLCBtYWtlIHN1cmUgdG8gY2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZSgwLjAtMS4wKWAuXG4gKlxuICogTGlzdGVuZXJzIGFuZCBzYW1wbGUgcmF0ZSBhcmUgZ2xvYmFsIGZvciBhbGwgYFZpcnR1YWxpemVkTGlzdGBzIC0gdHlwaWNhbCB1c2FnZSB3aWxsIGNvbWJpbmUgd2l0aFxuICogYFNjZW5lVHJhY2tlci5nZXRBY3RpdmVTY2VuZWAgdG8gZGV0ZXJtaW5lIHRoZSBjb250ZXh0IG9mIHRoZSBldmVudHMuXG4gKi9cbmNsYXNzIEZpbGxSYXRlSGVscGVyIHtcbiAgX2FueUJsYW5rU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcbiAgX2VuYWJsZWQgPSBmYWxzZTtcbiAgX2xpc3RNZXRyaWNzOiBMaXN0TWV0cmljc0FnZ3JlZ2F0b3I7XG4gIF9pbmZvOiBJbmZvID0gbmV3IEluZm8oKTtcbiAgX21vc3RseUJsYW5rU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcbiAgX3NhbXBsZXNTdGFydFRpbWU6ID9udW1iZXIgPSBudWxsO1xuXG4gIHN0YXRpYyBhZGRMaXN0ZW5lcihjYWxsYmFjazogRmlsbFJhdGVJbmZvID0+IHZvaWQpOiB7XG4gICAgcmVtb3ZlOiAoKSA9PiB2b2lkLFxuICAgIC4uLlxuICB9IHtcbiAgICBpZiAoX3NhbXBsZVJhdGUgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZWAgYmVmb3JlIGBhZGRMaXN0ZW5lcmAuJyk7XG4gICAgfVxuICAgIF9saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbW92ZTogKCkgPT4ge1xuICAgICAgICBfbGlzdGVuZXJzID0gX2xpc3RlbmVycy5maWx0ZXIobGlzdGVuZXIgPT4gY2FsbGJhY2sgIT09IGxpc3RlbmVyKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRTYW1wbGVSYXRlKHNhbXBsZVJhdGU6IG51bWJlcikge1xuICAgIF9zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRNaW5TYW1wbGVDb3VudChtaW5TYW1wbGVDb3VudDogbnVtYmVyKSB7XG4gICAgX21pblNhbXBsZUNvdW50ID0gbWluU2FtcGxlQ291bnQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihsaXN0TWV0cmljczogTGlzdE1ldHJpY3NBZ2dyZWdhdG9yKSB7XG4gICAgdGhpcy5fbGlzdE1ldHJpY3MgPSBsaXN0TWV0cmljcztcbiAgICB0aGlzLl9lbmFibGVkID0gKF9zYW1wbGVSYXRlIHx8IDApID4gTWF0aC5yYW5kb20oKTtcbiAgICB0aGlzLl9yZXNldERhdGEoKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9lbmFibGVkICYmIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPT0gbnVsbCkge1xuICAgICAgREVCVUcgJiYgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXI6IGFjdGl2YXRlJyk7XG4gICAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cbiAgfVxuXG4gIGRlYWN0aXZhdGVBbmRGbHVzaCgpIHtcbiAgICBpZiAoIXRoaXMuX2VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lOyAvLyBjb25zdCBmb3IgZmxvd1xuICAgIGlmIChzdGFydCA9PSBudWxsKSB7XG4gICAgICBERUJVRyAmJlxuICAgICAgICBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlcjogYmFpbCBvbiBkZWFjdGl2YXRlIHdpdGggbm8gc3RhcnQgdGltZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5mby5zYW1wbGVfY291bnQgPCBfbWluU2FtcGxlQ291bnQpIHtcbiAgICAgIC8vIERvbid0IGJvdGhlciB3aXRoIHVuZGVyLXNhbXBsZWQgZXZlbnRzLlxuICAgICAgdGhpcy5fcmVzZXREYXRhKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvdGFsX3RpbWVfc3BlbnQgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydDtcbiAgICBjb25zdCBpbmZvOiBhbnkgPSB7XG4gICAgICAuLi50aGlzLl9pbmZvLFxuICAgICAgdG90YWxfdGltZV9zcGVudCxcbiAgICB9O1xuICAgIGlmIChERUJVRykge1xuICAgICAgY29uc3QgZGVyaXZlZCA9IHtcbiAgICAgICAgYXZnX2JsYW5rbmVzczogdGhpcy5faW5mby5waXhlbHNfYmxhbmsgLyB0aGlzLl9pbmZvLnBpeGVsc19zYW1wbGVkLFxuICAgICAgICBhdmdfc3BlZWQ6IHRoaXMuX2luZm8ucGl4ZWxzX3Njcm9sbGVkIC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwKSxcbiAgICAgICAgYXZnX3NwZWVkX3doZW5fYW55X2JsYW5rOlxuICAgICAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX3NwZWVkX3N1bSAvIHRoaXMuX2luZm8uYW55X2JsYW5rX2NvdW50LFxuICAgICAgICBhbnlfYmxhbmtfcGVyX21pbjpcbiAgICAgICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCAvIDYwKSxcbiAgICAgICAgYW55X2JsYW5rX3RpbWVfZnJhYzogdGhpcy5faW5mby5hbnlfYmxhbmtfbXMgLyB0b3RhbF90aW1lX3NwZW50LFxuICAgICAgICBtb3N0bHlfYmxhbmtfcGVyX21pbjpcbiAgICAgICAgICB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19jb3VudCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCAvIDYwKSxcbiAgICAgICAgbW9zdGx5X2JsYW5rX3RpbWVfZnJhYzogdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfbXMgLyB0b3RhbF90aW1lX3NwZW50LFxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlcml2ZWQpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICAgIGRlcml2ZWRba2V5XSA9IE1hdGgucm91bmQoMTAwMCAqIGRlcml2ZWRba2V5XSkgLyAxMDAwO1xuICAgICAgfVxuICAgICAgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXIgZGVhY3RpdmF0ZUFuZEZsdXNoOiAnLCB7ZGVyaXZlZCwgaW5mb30pO1xuICAgIH1cbiAgICBfbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoaW5mbykpO1xuICAgIHRoaXMuX3Jlc2V0RGF0YSgpO1xuICB9XG5cbiAgY29tcHV0ZUJsYW5rbmVzcyhcbiAgICBwcm9wczoge1xuICAgICAgLi4uQ2VsbE1ldHJpY1Byb3BzLFxuICAgICAgaW5pdGlhbE51bVRvUmVuZGVyPzogP251bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICAgY2VsbHNBcm91bmRWaWV3cG9ydDoge1xuICAgICAgZmlyc3Q6IG51bWJlcixcbiAgICAgIGxhc3Q6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICAgc2Nyb2xsTWV0cmljczoge1xuICAgICAgZE9mZnNldDogbnVtYmVyLFxuICAgICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgICB2ZWxvY2l0eTogbnVtYmVyLFxuICAgICAgdmlzaWJsZUxlbmd0aDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfSxcbiAgKTogbnVtYmVyIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5fZW5hYmxlZCB8fFxuICAgICAgcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpID09PSAwIHx8XG4gICAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgPCBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0IHx8XG4gICAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID09IG51bGxcbiAgICApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCB7ZE9mZnNldCwgb2Zmc2V0LCB2ZWxvY2l0eSwgdmlzaWJsZUxlbmd0aH0gPSBzY3JvbGxNZXRyaWNzO1xuXG4gICAgLy8gRGVub21pbmF0b3IgbWV0cmljcyB0aGF0IHdlIHRyYWNrIGZvciBhbGwgZXZlbnRzIC0gbW9zdCBvZiB0aGUgdGltZSB0aGVyZSBpcyBubyBibGFua25lc3MgYW5kXG4gICAgLy8gd2Ugd2FudCB0byBjYXB0dXJlIHRoYXQuXG4gICAgdGhpcy5faW5mby5zYW1wbGVfY291bnQrKztcbiAgICB0aGlzLl9pbmZvLnBpeGVsc19zYW1wbGVkICs9IE1hdGgucm91bmQodmlzaWJsZUxlbmd0aCk7XG4gICAgdGhpcy5faW5mby5waXhlbHNfc2Nyb2xsZWQgKz0gTWF0aC5yb3VuZChNYXRoLmFicyhkT2Zmc2V0KSk7XG4gICAgY29uc3Qgc2Nyb2xsU3BlZWQgPSBNYXRoLnJvdW5kKE1hdGguYWJzKHZlbG9jaXR5KSAqIDEwMDApOyAvLyBweCAvIHNlY1xuXG4gICAgLy8gV2hldGhlciBibGFuayBub3cgb3Igbm90LCByZWNvcmQgdGhlIGVsYXBzZWQgdGltZSBibGFuayBpZiB3ZSB3ZXJlIGJsYW5rIGxhc3QgdGltZS5cbiAgICBjb25zdCBub3cgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgaWYgKHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX21zICs9IG5vdyAtIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lO1xuICAgIH1cbiAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgaWYgKHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX21zICs9IG5vdyAtIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lO1xuICAgIH1cbiAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG5cbiAgICBsZXQgYmxhbmtUb3AgPSAwO1xuICAgIGxldCBmaXJzdCA9IGNlbGxzQXJvdW5kVmlld3BvcnQuZmlyc3Q7XG4gICAgbGV0IGZpcnN0RnJhbWUgPSB0aGlzLl9saXN0TWV0cmljcy5nZXRDZWxsTWV0cmljcyhmaXJzdCwgcHJvcHMpO1xuICAgIHdoaWxlIChcbiAgICAgIGZpcnN0IDw9IGNlbGxzQXJvdW5kVmlld3BvcnQubGFzdCAmJlxuICAgICAgKCFmaXJzdEZyYW1lIHx8ICFmaXJzdEZyYW1lLmlzTW91bnRlZClcbiAgICApIHtcbiAgICAgIGZpcnN0RnJhbWUgPSB0aGlzLl9saXN0TWV0cmljcy5nZXRDZWxsTWV0cmljcyhmaXJzdCwgcHJvcHMpO1xuICAgICAgZmlyc3QrKztcbiAgICB9XG4gICAgLy8gT25seSBjb3VudCBibGFua1RvcCBpZiB3ZSBhcmVuJ3QgcmVuZGVyaW5nIHRoZSBmaXJzdCBpdGVtLCBvdGhlcndpc2Ugd2Ugd2lsbCBjb3VudCB0aGUgaGVhZGVyXG4gICAgLy8gYXMgYmxhbmsuXG4gICAgaWYgKGZpcnN0RnJhbWUgJiYgZmlyc3QgPiAwKSB7XG4gICAgICBibGFua1RvcCA9IE1hdGgubWluKFxuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBNYXRoLm1heCgwLCBmaXJzdEZyYW1lLm9mZnNldCAtIG9mZnNldCksXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgYmxhbmtCb3R0b20gPSAwO1xuICAgIGxldCBsYXN0ID0gY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0O1xuICAgIGxldCBsYXN0RnJhbWUgPSB0aGlzLl9saXN0TWV0cmljcy5nZXRDZWxsTWV0cmljcyhsYXN0LCBwcm9wcyk7XG4gICAgd2hpbGUgKFxuICAgICAgbGFzdCA+PSBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0ICYmXG4gICAgICAoIWxhc3RGcmFtZSB8fCAhbGFzdEZyYW1lLmlzTW91bnRlZClcbiAgICApIHtcbiAgICAgIGxhc3RGcmFtZSA9IHRoaXMuX2xpc3RNZXRyaWNzLmdldENlbGxNZXRyaWNzKGxhc3QsIHByb3BzKTtcbiAgICAgIGxhc3QtLTtcbiAgICB9XG4gICAgLy8gT25seSBjb3VudCBibGFua0JvdHRvbSBpZiB3ZSBhcmVuJ3QgcmVuZGVyaW5nIHRoZSBsYXN0IGl0ZW0sIG90aGVyd2lzZSB3ZSB3aWxsIGNvdW50IHRoZVxuICAgIC8vIGZvb3RlciBhcyBibGFuay5cbiAgICBpZiAobGFzdEZyYW1lICYmIGxhc3QgPCBwcm9wcy5nZXRJdGVtQ291bnQocHJvcHMuZGF0YSkgLSAxKSB7XG4gICAgICBjb25zdCBib3R0b21FZGdlID0gbGFzdEZyYW1lLm9mZnNldCArIGxhc3RGcmFtZS5sZW5ndGg7XG4gICAgICBibGFua0JvdHRvbSA9IE1hdGgubWluKFxuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBNYXRoLm1heCgwLCBvZmZzZXQgKyB2aXNpYmxlTGVuZ3RoIC0gYm90dG9tRWRnZSksXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBwaXhlbHNfYmxhbmsgPSBNYXRoLnJvdW5kKGJsYW5rVG9wICsgYmxhbmtCb3R0b20pO1xuICAgIGNvbnN0IGJsYW5rbmVzcyA9IHBpeGVsc19ibGFuayAvIHZpc2libGVMZW5ndGg7XG4gICAgaWYgKGJsYW5rbmVzcyA+IDApIHtcbiAgICAgIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lID0gbm93O1xuICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfc3BlZWRfc3VtICs9IHNjcm9sbFNwZWVkO1xuICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfY291bnQrKztcbiAgICAgIHRoaXMuX2luZm8ucGl4ZWxzX2JsYW5rICs9IHBpeGVsc19ibGFuaztcbiAgICAgIGlmIChibGFua25lc3MgPiAwLjUpIHtcbiAgICAgICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBub3c7XG4gICAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX2NvdW50Kys7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzY3JvbGxTcGVlZCA8IDAuMDEgfHwgTWF0aC5hYnMoZE9mZnNldCkgPCAxKSB7XG4gICAgICB0aGlzLmRlYWN0aXZhdGVBbmRGbHVzaCgpO1xuICAgIH1cbiAgICByZXR1cm4gYmxhbmtuZXNzO1xuICB9XG5cbiAgZW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgfVxuXG4gIF9yZXNldERhdGEoKSB7XG4gICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX2luZm8gPSBuZXcgSW5mbygpO1xuICAgIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lID0gbnVsbDtcbiAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID0gbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZpbGxSYXRlSGVscGVyO1xuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxhQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxnQkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBR2IsSUFBQUcsc0JBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUE0RCxJQUl0REksSUFBSSxPQUFBSCxhQUFBLENBQUFJLE9BQUEsV0FBQUQsS0FBQTtFQUFBLElBQUFGLGdCQUFBLENBQUFHLE9BQUEsUUFBQUQsSUFBQTtFQUFBLEtBQ1JFLGVBQWUsR0FBVyxDQUFDO0VBQUEsS0FDM0JDLFlBQVksR0FBVyxDQUFDO0VBQUEsS0FDeEJDLG1CQUFtQixHQUFXLENBQUM7RUFBQSxLQUMvQkMsa0JBQWtCLEdBQVcsQ0FBQztFQUFBLEtBQzlCQyxlQUFlLEdBQVcsQ0FBQztFQUFBLEtBQzNCQyxZQUFZLEdBQVcsQ0FBQztFQUFBLEtBQ3hCQyxjQUFjLEdBQVcsQ0FBQztFQUFBLEtBQzFCQyxlQUFlLEdBQVcsQ0FBQztFQUFBLEtBQzNCQyxnQkFBZ0IsR0FBVyxDQUFDO0VBQUEsS0FDNUJDLFlBQVksR0FBVyxDQUFDO0FBQUE7QUFHMUIsSUFBTUMsS0FBSyxHQUFHLEtBQUs7QUFFbkIsSUFBSUMsVUFBaUMsR0FBRyxFQUFFO0FBQzFDLElBQUlDLGVBQWUsR0FBRyxFQUFFO0FBQ3hCLElBQUlDLFdBQVcsR0FBR0gsS0FBSyxHQUFHLENBQUMsR0FBRyxJQUFJO0FBQUMsSUFVN0JJLGNBQWM7RUErQmxCLFNBQUFBLGVBQVlDLFdBQWtDLEVBQUU7SUFBQSxJQUFBbkIsZ0JBQUEsQ0FBQUcsT0FBQSxRQUFBZSxjQUFBO0lBQUEsS0E5QmhERSxrQkFBa0IsR0FBWSxJQUFJO0lBQUEsS0FDbENDLFFBQVEs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